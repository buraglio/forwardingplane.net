<html>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/bundle-playback.js?v=2N_sDSC0" charset="utf-8"></script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/wombat.js?v=txqj7nKC" charset="utf-8"></script>
<script>window.RufflePlayer=window.RufflePlayer||{};window.RufflePlayer.config={"autoplay":"on","unmuteOverlay":"hidden","showSwfDownload":true};</script>
<script type="text/javascript" src="https://web-static.archive.org/_static/js/ruffle/ruffle.js"></script>
<script type="text/javascript">
    __wm.init("https://web.archive.org/web");
  __wm.wombat("https://people.ucsc.edu/~warner/Bufs/QFX3500.html","20260106010752","https://web.archive.org/","web","https://web-static.archive.org/_static/",
	      "1767661672");
</script>
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/banner-styles.css?v=1utQkbB3" />
<link rel="stylesheet" type="text/css" href="https://web-static.archive.org/_static/css/iconochive.css?v=3PDvdIFv" />
<!-- End Wayback Rewrite JS Include -->
<table width="700">
<tr><td>
<h2>Juniper QFX3500</h2>
<p>
Intro <a href="https://web.archive.org/web/20260106010752/https://people.ucsc.edu/~warner/Bufs/qfx3500-NW.pdf">press release</a> is dated February 2011. A pretty
cool <a href="https://web.archive.org/web/20260106010752/https://people.ucsc.edu/~warner/Bufs/qfx3500_sales_preso.pdf">sales presentation</a> actually 
contains info on buffer size at slide 25. It has much more information than the 
<a href="https://web.archive.org/web/20260106010752/https://people.ucsc.edu/~warner/Bufs/qfx3500-datasheet.pdf">published datasheet</a>.
<p>
Juniper switches based on Trident+ and Trident2 have some of the buffers
dedicated to specific ports with the rest held in a shared pool. Juniper
permits allocation rules for shared pool to be adjusted by the user.
Here is an example of what that allocation can look like:
<pre>
show class-of-service shared-buffer

user@switch&gt; show class-of-service shared-buffer
Ingress:
  Total Buffer     :  9360.00 KB   
  Dedicated Buffer :  2158.00 KB  
  Shared Buffer    :  7202.00 KB  
    Lossless          :  648.18 KB   
    Lossless Headroom :  3240.90 KB  
    Lossy             :  3312.92 KB  

  Lossless Headroom Utilization:
  Node Device         Total          Used                  Free
  0                   3240.90 KB     0.00 KB               3240.90 KB  

Egress:
  Total Buffer     :  9360.00 KB   
  Dedicated Buffer :  2704.00 KB  
  Shared Buffer    :  6656.00 KB  
    Lossless          :  3328.00 KB  
    Multicast         :  1264.64 KB  
    Lossy             :  2063.36 KB  
</pre>
Changing the buffer parameters is a disruptive operation. Queuing and
dequeuing are handled in the forwarding plane based on parameters the
CPU loads into the switch chip. Changing the parameters resets the 
forwarding plane.
<p>
Juniper has an <b>excellent</b> white paper on <a href="https://web.archive.org/web/20260106010752/https://people.ucsc.edu/~warner/Bufs/ex4600-buffer.pdf">
buffer management</a> that covers several switches that use Trident+ 
and Trident2 silicon.
<p>
This is reinforced by a 
<a href="https://web.archive.org/web/20260106010752/https://people.ucsc.edu/~warner/Bufs/Juniper-buffers.pdf"> Q&A; on a Juniper Mailing</a> list in 2014.
</td></tr>

<!--
     FILE ARCHIVED ON 01:07:52 Jan 06, 2026 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 15:18:47 Feb 10, 2026.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  captures_list: 0.578
  exclusion.robots: 0.018
  exclusion.robots.policy: 0.008
  esindex: 0.01
  cdx.remote: 146.602
  LoadShardBlock: 63.39 (3)
  PetaboxLoader3.datanode: 63.751 (4)
  PetaboxLoader3.resolve: 50.952 (2)
  load_resource: 56.892
-->