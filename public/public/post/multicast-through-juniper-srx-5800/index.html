


    




<!DOCTYPE HTML>

<html>
    <head>
        <script type="application/ld+json">
    {
        "@context" : "http://schema.org",
        "@type" : "BlogPosting",
        "mainEntityOfPage": {
             "@type": "WebPage",
             "@id": "https:\/\/forwardingplane.net\/"
        },
        "articleSection" : "public",
        "name" : "Multicast through Juniper SRX 5800",
        "headline" : "Multicast through Juniper SRX 5800",
        "description" : "We\x26rsquo;ve been working toward a more simplified model for our network path, and in doing so, we desired a congruent path for IPv6, IPv4 Multicast and IPv4 Unicast.\nHowever, this is actually pretty hard when dealing with the link speeds, amounts of traffic and flows that we do, in conjunction with Firewall\x26hellip;..and IDP\/IPS\x26hellip;\nLots of research, reading and testing was done.\nJuniper SRX series has full support for 90% of this, with IPv6 IDP coming in Q2 of 2011.",
        "inLanguage" : "en",
        "author" : "Nick Buragliotruenativemain",
        "creator" : "Nick Buragliotruenativemain",
        "publisher": "Nick Buragliotruenativemain",
        "accountablePerson" : "Nick Buragliotruenativemain",
        "copyrightHolder" : "Nick Buragliotruenativemain",
        "copyrightYear" : "2010",
        "datePublished": "2010-10-17 23:56:00 \x2b0000 \x2b0000",
        "dateModified" : "2010-10-17 23:56:00 \x2b0000 \x2b0000",
        "url" : "https:\/\/forwardingplane.net\/public\/post\/multicast-through-juniper-srx-5800\/",
        "wordCount" : "463",
        "keywords" : [ "Routing","Security","Blog" ]
    }
    </script>
        
            <title>Multicast through Juniper SRX 5800 - ForwardingPlane.net</title>
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.58.3" />
        


        
        
            
        

        <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Multicast through Juniper SRX 5800"/>
<meta name="twitter:description" content="We&rsquo;ve been working toward a more simplified model for our network path, and in doing so, we desired a congruent path for IPv6, IPv4 Multicast and IPv4 Unicast.
However, this is actually pretty hard when dealing with the link speeds, amounts of traffic and flows that we do, in conjunction with Firewall&hellip;..and IDP/IPS&hellip;
Lots of research, reading and testing was done.
Juniper SRX series has full support for 90% of this, with IPv6 IDP coming in Q2 of 2011."/>

        <meta property="og:title" content="Multicast through Juniper SRX 5800" />
<meta property="og:description" content="We&rsquo;ve been working toward a more simplified model for our network path, and in doing so, we desired a congruent path for IPv6, IPv4 Multicast and IPv4 Unicast.
However, this is actually pretty hard when dealing with the link speeds, amounts of traffic and flows that we do, in conjunction with Firewall&hellip;..and IDP/IPS&hellip;
Lots of research, reading and testing was done.
Juniper SRX series has full support for 90% of this, with IPv6 IDP coming in Q2 of 2011." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://forwardingplane.net/public/post/multicast-through-juniper-srx-5800/" />
<meta property="article:published_time" content="2010-10-17T23:56:00+00:00" />
<meta property="article:modified_time" content="2010-10-17T23:56:00+00:00" />

        <meta property="og:image" content="https://forwardingplane.net//images/logo.png">
        <meta property="og:image:type" content="image/png">
        <meta property="og:image:width" content="512">
        <meta property="og:image:height" content="512">
        <meta itemprop="name" content="Multicast through Juniper SRX 5800">
<meta itemprop="description" content="We&rsquo;ve been working toward a more simplified model for our network path, and in doing so, we desired a congruent path for IPv6, IPv4 Multicast and IPv4 Unicast.
However, this is actually pretty hard when dealing with the link speeds, amounts of traffic and flows that we do, in conjunction with Firewall&hellip;..and IDP/IPS&hellip;
Lots of research, reading and testing was done.
Juniper SRX series has full support for 90% of this, with IPv6 IDP coming in Q2 of 2011.">


<meta itemprop="datePublished" content="2010-10-17T23:56:00&#43;00:00" />
<meta itemprop="dateModified" content="2010-10-17T23:56:00&#43;00:00" />
<meta itemprop="wordCount" content="463">



<meta itemprop="keywords" content="Routing,Security," />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.css">
            <link rel="stylesheet" href="https://forwardingplane.net/css/main.css">
            <link rel="stylesheet" href="https://forwardingplane.net/css/add-on.css">
            <link rel="stylesheet" href="https://forwardingplane.net/css/academicons.min.css">
        

        


  
    


      
    </head>
    <body>

      
      <div id="wrapper">

    
<header id="header">
    
      <h1><a href="https://forwardingplane.net/"></a></h1>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="https://forwardingplane.net/post/">
                            <i class="post">&nbsp;</i>Posts
                    </a>
                </li>
            
                <li>
                    <a href="https://forwardingplane.net/about">
                            <i class="about">&nbsp;</i>about
                    </a>
                </li>
            
                <li>
                    <a href="https://forwardingplane.net/configuration-archive">
                            <i class="configuration-archive">&nbsp;</i>configuration-archive
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="https://forwardingplane.net/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="as_sitesearch" value="https://forwardingplane.net/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="https://forwardingplane.net/post/">
                            <h3>
                                <i class="post">&nbsp;</i>Posts
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://forwardingplane.net/about">
                            <h3>
                                <i class="about">&nbsp;</i>about
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="https://forwardingplane.net/configuration-archive">
                            <h3>
                                <i class="configuration-archive">&nbsp;</i>configuration-archive
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section class="recent-posts">
            <div class="mini-posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                

                
            </div>
        </section>

    
        
</section>

    
    <div id="main">
        <article class="post">
            
            <header>
    <div class="title">
        
            <h1><a href="https://forwardingplane.net/public/post/multicast-through-juniper-srx-5800/">Multicast through Juniper SRX 5800</a></h1>
            
        
        
    </div>
</header>

            <div id="content">
                <p>We&rsquo;ve been working toward a more simplified model for our network path, and in doing so, we desired a congruent path for IPv6, IPv4 Multicast and IPv4 Unicast.<br />
However, this is actually pretty hard when dealing with the link speeds, amounts of traffic and flows that we do, in conjunction with Firewall&hellip;..and IDP/IPS&hellip;<br />
Lots of research, reading and testing was done.<br />
Juniper SRX series has full support for 90% of this, with IPv6 IDP coming in Q2 of 2011.</p>

<p>IPv4 Multicast is that unpleasant, poorly understood beast that most folks try to ignore. Nevertheless, we need it. So, we had to make this work through our SRX (in the past IPv4 multicast took a different path in/out of our network.</p>

<p>I&rsquo;m going to glaze over the multicast bits on our Juniper MX routers, if you&rsquo;re doing multicast already, this should already be working and Juniper has well documented and well implemented multicast capabilities.</p>

<p>On the SRX, luckily, it&rsquo;s pretty similar.</p>

<p>buraglio@srx5800&gt; show configuration protocols pim</p>

<p>rib-group inet multicast-rpf-rib;</p>

<p>rp {</p>

<p>static {</p>

<p>address 10.16.0.145;</p>

<p>}</p>

<p>}</p>

<p>interface xe-1/1/0.0;</p>

<p>interface xe-2/1/0.0;</p>

<p>interface xe-10/1/0.0;</p>

<p>interface xe-13/1/0.0;</p>

<p>{primary:node0}</p>

<p>Make sure you are importing the routes into the tables by configuring your RIB groups</p>

<p>buraglio@srx5800&gt; show configuration routing-options rib-groups</p>

<p>igp-rib {</p>

<p>import-rib [ inet.0 inet.2 ];</p>

<p>}</p>

<p>multicast-rpf-rib {</p>

<p>export-rib inet.2;</p>

<p>import-rib inet.2;</p>

<p>}</p>

<p>You&rsquo;ll need to make sure that there is a firewall policy to permit your multicast to actually flow. For arguments sake, I&rsquo;m assuming you have an outbound policy that is less than or equal to this in terms of policy allowed.</p>

<p>{primary:node0}</p>

<p>buraglio@srx5800&gt; show configuration security policies from-zone Untrust to-zone Trust policy Multicast-permit</p>

<p>match {</p>

<p>source-address any;</p>

<p>destination-address multicast_224_0_0_0_4;</p>

<p>application junos-udp-any;</p>

<p>}</p>

<p>then {</p>

<p>permit;</p>

<p>log {</p>

<p>session-init;</p>

<p>}</p>

<p>}</p>

<p>Thats pretty much it as far as the SRX goes (assuming I&rsquo;m remembering correctly, it&rsquo;s been a while since we did it and I don&rsquo;t know multicast as well as I&rsquo;d like). Using the <a href="http://globalnoc.iu.edu/i2network/multicast-cookbook.html">cookbook from Internet2</a> one should be enough to get Multicast working with your SRX as long as you have your policy set to allow it.</p>

<p>buraglio@srx5800&gt; show multicast statistics</p>

<p>&hellip;snip&hellip;</p>

<p>Interface: xe-10/1/0.0</p>

<p>Routing protocol: PIM Mismatch error: 0</p>

<p>Mismatch: 8 Mismatch no route: 0</p>

<p>Kernel resolve: 287 Routing notify: 0</p>

<p>Resolve no route: 0 Resolve error: 0</p>

<p>Resolve filtered: 0 Notify filtered: 0</p>

<p>In kbytes: 4273 In packets: 45042</p>

<p>Out kbytes: 18014398509409554 Out packets: 18446744073709258616</p>

<p>Interface: xe-1/1/0.0</p>

<p>Routing protocol: PIM Mismatch error: 0</p>

<p>Mismatch: 11786 Mismatch no route: 3</p>

<p>Kernel resolve: 323210 Routing notify: 0</p>

<p>Resolve no route: 0 Resolve error: 0</p>

<p>Resolve filtered: 0 Notify filtered: 0</p>

<p>In kbytes: 100127811 In packets: 1164651571</p>

<p>Out kbytes: 10827919 Out packets: 80039321</p>

<p>&hellip;snip&hellip;</p>

<p>[[ This is a content summary only. Visit my website for full links, other content, and more! ]]</p>

            </div>
        </article>
    </div>
    
<section id="sidebar">

  
  <section id="intro">
    
    
    
    
  </section>

  
  <section class="recent-posts">
    <div class="mini-posts">
      <header>
        <h3>Recent Posts</h3>
      </header>
      <div class="posts-container">
        

        
          
        

        
      </div>

      
    </div>
  </section>

  
  
  

  
  

  
  <section id="footer">
    
    <p class="copyright">
      
        Copyright (c) 2019, all rights reserved.
      .
      Powered by <a href="//gohugo.io" target="_blank">Hugo</a>
    </p>
  </section>
</section>

    </div>
    <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
    

    
      
    

    
      
      
      
        <script src="//cdn.bootcss.com/highlight.js//highlight.min.js"></script>
        
        
        
        <script>hljs.configure({languages: []}); hljs.initHighlightingOnLoad();</script>
      
    
    
    
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.25/jquery.fancybox.min.js"></script>
      <script src="https://forwardingplane.net/js/util.js"></script>
      <script src="https://forwardingplane.net/js/main.js"></script>
      <script src="https://forwardingplane.net/js/backToTop.js"></script>
    

    

    
    <script>hljs.initHighlightingOnLoad();</script>
      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


  </body>
</html>

